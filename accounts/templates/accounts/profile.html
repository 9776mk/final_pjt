{% extends 'base.html' %}
{% load static %}

{% block content %}
  <div class="container my-5">
    <div class="d-flex justify-content-center align-items-center">
      {% if user.profile.image %}
      <img src="{{ user.profile.image.url }}" style="border-radius: 70%; max-width: 100%;" alt="">
      {% endif %}
      <div class="ms-5 w-100">
        <div class="d-flex align-items-center">
          <h1>{{ user.username }} profile</h1>

          <!-- 회원 정보 수정 & 팔로우 버튼 -->
          {% if user == request.user %}
            <a href="{% url 'accounts:profile_update' user.pk %}">회원 정보 수정</a>
          {% elif request.user.is_authenticated %}
            <form id="follow-form" data-user-id="{{ user.pk }}">
              {% csrf_token %}
              {% if request.user in user.followers.all %}
                <input id="follow-btn" type="submit" value="언팔로우" class="btn btn-danger">
              {% else %}
                <input id="follow-btn" type="submit" value="팔로우" class="btn btn-primary">
              {% endif %}
            </form>
          {% endif %}

          <p class="text-primary">팔로잉: <span id="followings-count">{{ user.followings.count }}</span></p>
          <p class="text-primary">팔로워: <span id="followers-count">{{ user.followers.count }}</span></p>
        </div>

        <p>{{ user.profile.nickname }}</p>
        <p>기술스택: {{ user.profile.language }}</p>
        <p>MBTI: {{ user.profile.mbti }}</p>
        <p>소개글 {{ user.profile.intro }}</p>
      </div>
    </div>
    <hr>
    <div class="d-flex flex-wrap justify-content-center flex-column">
      <div>
        <!-- 16진수 색상표 https://jasmintime.com/244 -->
        {% if user.profile.github_id %}
          <img src="https://ghchart.rshah.org/{{ user.profile.github_id }}" class="w-100">
          <img src="https://ghchart.rshah.org/6495ed/{{ user.profile.github_id }}" class="w-100">
        {% endif %}
      </div>
      <h5>작성 글</h5>
      <h5>작성 댓글</h5>
      <h5>방명록</h5>
    </div>
  </div>
{% endblock content %}

{% block script %}
  <script type="text/javascript" src="{% static 'js/accounts_follow_async.js' %}"></script>
{% endblock script %}